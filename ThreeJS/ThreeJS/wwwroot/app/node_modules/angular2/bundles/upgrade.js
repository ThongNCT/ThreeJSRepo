"format register";System.register("angular2/src/upgrade/metadata",["angular2/compiler"],!0,function(a,b,c){function d(a){var b=k.resolve(a),c=b.selector;if(!c.match(i))throw new Error("Only selectors matching element names are supported, got: "+c);var c=c.replace(j,function(a,b){return b.toUpperCase()});return{type:a,selector:c,inputs:e(b.inputs),outputs:e(b.outputs)}}function e(a){var b=[];if(a)for(var c=0;c<a.length;c++){var d=a[c].split(":"),e=d[0].trim(),f=(d[1]||d[0]).trim(),g=f.charAt(0).toUpperCase()+f.substr(1);b.push({prop:e,attr:f,bracketAttr:"["+f+"]",parenAttr:"("+f+")",bracketParenAttr:"[("+f+")]",onAttr:"on"+g,bindAttr:"bind"+g,bindonAttr:"bindon"+g})}return b}var f=System.global,g=f.define;f.define=void 0;var h=a("angular2/compiler"),i=/^[\w|-]*$/,j=/-(\w)/g,k=new h.DirectiveResolver;return b.getComponentInfo=d,b.parseFields=e,f.define=g,c.exports}),System.register("angular2/src/upgrade/util",[],!0,function(a,b,c){function d(a){return"function"==typeof a?a.name||a.toString():""+a}function e(a){throw console.log(a,a.stack),a}function f(a){return"$"+a+"Controller"}var g=System.global,h=g.define;return g.define=void 0,b.stringify=d,b.onError=e,b.controllerKey=f,g.define=h,c.exports}),System.register("angular2/src/upgrade/constants",[],!0,function(a,b,c){var d=System.global,e=d.define;return d.define=void 0,b.NG2_COMPILER="ng2.Compiler",b.NG2_INJECTOR="ng2.Injector",b.NG2_COMPONENT_FACTORY_REF_MAP="ng2.ComponentFactoryRefMap",b.NG2_ZONE="ng2.NgZone",b.NG1_CONTROLLER="$controller",b.NG1_SCOPE="$scope",b.NG1_ROOT_SCOPE="$rootScope",b.NG1_COMPILE="$compile",b.NG1_HTTP_BACKEND="$httpBackend",b.NG1_INJECTOR="$injector",b.NG1_PARSE="$parse",b.NG1_TEMPLATE_CACHE="$templateCache",b.NG1_TESTABILITY="$$testability",b.REQUIRE_INJECTOR="^"+b.NG2_INJECTOR,d.define=e,c.exports}),System.register("angular2/src/upgrade/downgrade_ng2_adapter",["angular2/core","angular2/src/upgrade/constants"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=a("angular2/core"),g=a("angular2/src/upgrade/constants"),h={__UNINITIALIZED__:!0},i=function(){function a(a,b,c,d,e,f,g,h){this.id=a,this.info=b,this.element=c,this.attrs=d,this.scope=e,this.parentInjector=f,this.parse=g,this.componentFactory=h,this.component=null,this.inputChangeCount=0,this.inputChanges=null,this.componentRef=null,this.changeDetector=null,this.contentInsertionPoint=null,this.element[0].id=a,this.componentScope=e.$new(),this.childNodes=c.contents()}return a.prototype.bootstrapNg2=function(){var a=f.ReflectiveInjector.resolveAndCreate([f.provide(g.NG1_SCOPE,{useValue:this.componentScope})],this.parentInjector);this.contentInsertionPoint=document.createComment("ng1 insertion point"),this.componentRef=this.componentFactory.create(a,[[this.contentInsertionPoint]],"#"+this.id),this.changeDetector=this.componentRef.changeDetectorRef,this.component=this.componentRef.instance},a.prototype.setupInputs=function(){for(var a=this,b=this.attrs,c=this.info.inputs,d=0;d<c.length;d++){var e=c[d],f=null;if(b.hasOwnProperty(e.attr)){var g=function(b){var c=h;return function(d){null!==a.inputChanges&&(a.inputChangeCount++,a.inputChanges[b]=new j(d,c===h?d:c),c=d),a.component[b]=d}}(e.prop);b.$observe(e.attr,g)}else b.hasOwnProperty(e.bindAttr)?f=b[e.bindAttr]:b.hasOwnProperty(e.bracketAttr)?f=b[e.bracketAttr]:b.hasOwnProperty(e.bindonAttr)?f=b[e.bindonAttr]:b.hasOwnProperty(e.bracketParenAttr)&&(f=b[e.bracketParenAttr]);if(null!=f){var i=function(b){return function(c,d){null!=a.inputChanges&&(a.inputChangeCount++,a.inputChanges[b]=new j(d,c)),a.component[b]=c}}(e.prop);this.componentScope.$watch(f,i)}}var k=this.info.type.prototype;k&&k.ngOnChanges&&(this.inputChanges={},this.componentScope.$watch(function(){return a.inputChangeCount},function(){var b=a.inputChanges;a.inputChanges={},a.component.ngOnChanges(b)})),this.componentScope.$watch(function(){return a.changeDetector&&a.changeDetector.detectChanges()})},a.prototype.projectContent=function(){var a=this.childNodes,b=this.contentInsertionPoint.parentNode;if(b)for(var c=0,d=a.length;c<d;c++)b.insertBefore(a[c],this.contentInsertionPoint)},a.prototype.setupOutputs=function(){for(var a=this,b=this.attrs,c=this.info.outputs,d=0;d<c.length;d++){var e=c[d],f=null,g=!1,h=e.bindonAttr?e.bindonAttr.substring(0,e.bindonAttr.length-6):null,i=e.bracketParenAttr?"[("+e.bracketParenAttr.substring(2,e.bracketParenAttr.length-8)+")]":null;if(b.hasOwnProperty(e.onAttr)?f=b[e.onAttr]:b.hasOwnProperty(e.parenAttr)?f=b[e.parenAttr]:b.hasOwnProperty(h)?(f=b[h],g=!0):b.hasOwnProperty(i)&&(f=b[i],g=!0),null!=f&&null!=g){var j=this.parse(f),k=j.assign;if(g&&!k)throw new Error("Expression '"+f+"' is not assignable!");var l=this.component[e.prop];if(!l)throw new Error("Missing emitter '"+e.prop+"' on component '"+this.info.selector+"'!");l.subscribe({next:g?function(b){return function(c){return b(a.scope,c)}}(k):function(b){return function(c){return b(a.scope,{$event:c})}}(j)})}}},a.prototype.registerCleanup=function(){var a=this;this.element.bind("$destroy",function(){a.componentScope.$destroy(),a.componentRef.destroy()})},a}();b.DowngradeNg2ComponentAdapter=i;var j=function(){function a(a,b){this.previousValue=a,this.currentValue=b}return a.prototype.isFirstChange=function(){return this.previousValue===this.currentValue},a}();return d.define=e,c.exports}),System.register("angular2/src/upgrade/angular_js",[],!0,function(a,b,c){function d(){throw new Error("AngularJS v1.x is not loaded!")}var e=System.global,f=e.define;e.define=void 0;var g={bootstrap:d,module:d,element:d,version:d,resumeBootstrap:d,getTestability:d};try{window.hasOwnProperty("angular")&&(g=window.angular)}catch(a){}return b.bootstrap=g.bootstrap,b.module=g.module,b.element=g.element,b.version=g.version,b.resumeBootstrap=g.resumeBootstrap,b.getTestability=g.getTestability,e.define=f,c.exports}),System.register("angular2/src/upgrade/upgrade_ng1_adapter",["angular2/core","angular2/src/upgrade/constants","angular2/src/upgrade/util","angular2/src/upgrade/angular_js"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=a("angular2/core"),g=a("angular2/src/upgrade/constants"),h=a("angular2/src/upgrade/util"),i=a("angular2/src/upgrade/angular_js"),j=/([A-Z])/g,k={__UNINITIALIZED__:!0},l="NOT_SUPPORTED",m=function(){function a(a){this.name=a,this.inputs=[],this.inputsRename=[],this.outputs=[],this.outputsRename=[],this.propertyOutputs=[],this.checkProperties=[],this.propertyMap={},this.linkFn=null,this.directive=null,this.$controller=null;var b=a.replace(j,function(a,b){return"-"+b.toLowerCase()}),c=this;this.type=f.Directive({selector:b,inputs:this.inputsRename,outputs:this.outputsRename}).Class({constructor:[new f.Inject(g.NG1_SCOPE),f.ElementRef,function(a,b){return new n(c.linkFn,a,c.directive,b,c.$controller,c.inputs,c.outputs,c.propertyOutputs,c.checkProperties,c.propertyMap)}],ngOnInit:function(){},ngOnChanges:function(){},ngDoCheck:function(){}})}return a.prototype.extractDirective=function(a){var b=a.get(this.name+"Directive");if(b.length>1)throw new Error("Only support single directive definition for: "+this.name);var c=b[0];c.replace&&this.notSupported("replace"),c.terminal&&this.notSupported("terminal");var d=c.link;return"object"==typeof d&&d.post&&this.notSupported("link.post"),c},a.prototype.notSupported=function(a){throw new Error("Upgraded directive '"+this.name+"' does not support '"+a+"'.")},a.prototype.extractBindings=function(){var a="object"==typeof this.directive.bindToController;if(a&&Object.keys(this.directive.scope).length)throw new Error("Binding definitions on scope and controller at the same time are not supported.");var b=a?this.directive.bindToController:this.directive.scope;if("object"==typeof b)for(var c in b)if(b.hasOwnProperty(c)){var d=b[c],e=d.charAt(0);d=d.substr(1)||c;var f="output_"+c,g=f+": "+c,h=f+": "+c+"Change",i="input_"+c,j=i+": "+c;switch(e){case"=":this.propertyOutputs.push(f),this.checkProperties.push(d),this.outputs.push(f),this.outputsRename.push(h),this.propertyMap[f]=d;case"@":case"<":this.inputs.push(i),this.inputsRename.push(j),this.propertyMap[i]=d;break;case"&":this.outputs.push(f),this.outputsRename.push(g),this.propertyMap[f]=d;break;default:var k=JSON.stringify(b);throw new Error("Unexpected mapping '"+e+"' in '"+k+"' in '"+this.name+"' directive.")}}},a.prototype.compileTemplate=function(a,b,c){function d(b){var c=document.createElement("div");return c.innerHTML=b,a(c.childNodes)}var e=this;if(void 0!==this.directive.template)this.linkFn=d(this.directive.template);else{if(!this.directive.templateUrl)throw new Error("Directive '"+this.name+"' is not a component, it is missing template.");var f=this.directive.templateUrl,g=b.get(f);if(void 0===g)return new Promise(function(a,g){c("GET",f,null,function(c,h){200==c?a(e.linkFn=d(b.put(f,h))):g("GET "+f+" returned "+c+": "+h)})});this.linkFn=d(g)}return null},a.resolve=function(a,b){var c=[],d=b.get(g.NG1_COMPILE),e=b.get(g.NG1_TEMPLATE_CACHE),f=b.get(g.NG1_HTTP_BACKEND),h=b.get(g.NG1_CONTROLLER);for(var i in a)if(a.hasOwnProperty(i)){var j=a[i];j.directive=j.extractDirective(b),j.$controller=h,j.extractBindings();var k=j.compileTemplate(d,e,f);k&&c.push(k)}return Promise.all(c)},a}();b.UpgradeNg1ComponentAdapterBuilder=m;var n=function(){function a(a,b,c,d,e,g,j,m,n,o){this.linkFn=a,this.directive=c,this.inputs=g,this.outputs=j,this.propOuts=m,this.checkProperties=n,this.propertyMap=o,this.destinationObj=null,this.checkLastValues=[],this.element=d.nativeElement,this.componentScope=b.$new(!!c.scope);var p=i.element(this.element),q=c.controller,r=null;if(q){var s={$scope:this.componentScope,$element:p};r=e(q,s,null,c.controllerAs),p.data(h.controllerKey(c.name),r)}var t=c.link;if("object"==typeof t&&(t=t.pre),t){var u=l,v=l,w=this.resolveRequired(p,c.require);c.link(this.componentScope,p,u,w,v)}this.destinationObj=c.bindToController&&r?r:this.componentScope;for(var x=0;x<g.length;x++)this[g[x]]=null;for(var y=0;y<j.length;y++){var z=this[j[y]]=new f.EventEmitter;this.setComponentProperty(j[y],function(a){return function(b){return a.emit(b)}}(z))}for(var A=0;A<m.length;A++)this[m[A]]=new f.EventEmitter,this.checkLastValues.push(k)}return a.prototype.ngOnInit=function(){for(var a,b=this,c=[];a=this.element.firstChild;)this.element.removeChild(a),c.push(a);this.linkFn(this.componentScope,function(a,c){for(var d=0,e=a.length;d<e;d++)b.element.appendChild(a[d])},{parentBoundTranscludeFn:function(a,b){b(c)}}),this.destinationObj.$onInit&&this.destinationObj.$onInit()},a.prototype.ngOnChanges=function(a){for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];this.setComponentProperty(b,c.currentValue)}},a.prototype.ngDoCheck=function(){for(var a=0,b=this.destinationObj,c=this.checkLastValues,d=this.checkProperties,e=0;e<d.length;e++){var f=b[d[e]],g=c[e];if(f!==g)if("number"==typeof f&&isNaN(f)&&"number"==typeof g&&isNaN(g));else{var h=this[this.propOuts[e]];h.emit(c[e]=f)}}return a},a.prototype.setComponentProperty=function(a,b){this.destinationObj[this.propertyMap[a]]=b},a.prototype.resolveRequired=function(a,b){if(b){if("string"==typeof b){var c=b,d=!1,e=!1,f=!1;"?"==c.charAt(0)&&(d=!0,c=c.substr(1)),"^"==c.charAt(0)&&(f=!0,c=c.substr(1)),"^"==c.charAt(0)&&(e=!0,c=c.substr(1));var g=h.controllerKey(c);e&&(a=a.parent());var i=f?a.inheritedData(g):a.data(g);if(!i&&!d)throw new Error("Can not locate '"+b+"' in '"+this.directive.name+"'.");return i}if(b instanceof Array){for(var j=[],k=0;k<b.length;k++)j.push(this.resolveRequired(a,b[k]));return j}throw new Error("Directive '"+this.directive.name+"' require syntax unrecognized: "+this.directive.require)}},a}();return d.define=e,c.exports}),System.register("angular2/src/upgrade/upgrade_adapter",["angular2/core","angular2/src/facade/lang","angular2/src/facade/async","angular2/platform/browser","angular2/src/upgrade/metadata","angular2/src/upgrade/util","angular2/src/upgrade/constants","angular2/src/upgrade/downgrade_ng2_adapter","angular2/src/upgrade/upgrade_ng1_adapter","angular2/src/upgrade/angular_js"],!0,function(a,b,c){function d(a,b){function c(c,d){var e=c[a.selector];if(!e)throw new Error("Expecting ComponentFactory for: "+a.selector);var f=0;return{restrict:"E",require:m.REQUIRE_INJECTOR,link:{post:function(c,g,h,i,j){var k=(g[0],new n.DowngradeNg2ComponentAdapter(b+f++,a,g,h,c,i,d,e));k.setupInputs(),k.bootstrapNg2(),k.projectContent(),k.setupOutputs(),k.registerCleanup()}}}}return c.$inject=[m.NG2_COMPONENT_FACTORY_REF_MAP,m.NG1_PARSE],c}var e=System.global,f=e.define;e.define=void 0;var g=a("angular2/core"),h=a("angular2/src/facade/lang"),i=a("angular2/src/facade/async"),j=a("angular2/platform/browser"),k=a("angular2/src/upgrade/metadata"),l=a("angular2/src/upgrade/util"),m=a("angular2/src/upgrade/constants"),n=a("angular2/src/upgrade/downgrade_ng2_adapter"),o=a("angular2/src/upgrade/upgrade_ng1_adapter"),p=a("angular2/src/upgrade/angular_js"),q=0,r=function(){function a(){this.idPrefix="NG2_UPGRADE_"+q++ +"_",this.upgradedComponents=[],this.downgradedComponents={},this.providers=[]}return a.prototype.downgradeNg2Component=function(a){this.upgradedComponents.push(a);var b=k.getComponentInfo(a);return d(b,""+this.idPrefix+b.selector+"_c")},a.prototype.upgradeNg1Component=function(a){return this.downgradedComponents.hasOwnProperty(a)?this.downgradedComponents[a].type:(this.downgradedComponents[a]=new o.UpgradeNg1ComponentAdapterBuilder(a)).type},a.prototype.bootstrap=function(a,b,c){var d,e,f,k=this,n=new s,q=null,r=j.browserPlatform(),t=g.ReflectiveInjector.resolveAndCreate([j.BROWSER_APP_PROVIDERS,g.provide(m.NG1_INJECTOR,{useFactory:function(){return q}}),g.provide(m.NG1_COMPILE,{useFactory:function(){return q.get(m.NG1_COMPILE)}}),this.providers],r.injector).get(g.ApplicationRef),u=t.injector,v=u.get(g.NgZone),w=u.get(g.ComponentResolver),x=[],y={},z=p.module(this.idPrefix,b),A=null,B=null;z.value(m.NG2_INJECTOR,u).value(m.NG2_ZONE,v).value(m.NG2_COMPILER,w).value(m.NG2_COMPONENT_FACTORY_REF_MAP,y).config(["$provide",function(a){a.decorator(m.NG1_ROOT_SCOPE,["$delegate",function(a){if(e=a.constructor.prototype,!e.hasOwnProperty("$apply"))throw new Error("Failed to find '$apply' on '$rootScope'!");return d=e.$apply,e.$apply=function(a){return x.push(a)},f=a}]),a.decorator(m.NG1_TESTABILITY,["$delegate",function(a){var b=this,c=u.get(g.Testability),d=a.whenStable,e=function(a){var f=b;d.call(b,function(){c.isStable()?a.apply(this,arguments):c.whenStable(e.bind(f,a))})};return a.whenStable=e,a}])}]),B=new Promise(function(a,b){z.run(["$injector","$rootScope",function(c,d){q=c,i.ObservableWrapper.subscribe(v.onMicrotaskEmpty,function(a){return v.runOutsideAngular(function(){return d.$apply()})}),o.UpgradeNg1ComponentAdapterBuilder.resolve(k.downgradedComponents,c).then(a,b)}])});var C=h.global.angular;return C.resumeBootstrap=void 0,p.element(a).data(l.controllerKey(m.NG2_INJECTOR),u),v.run(function(){p.bootstrap(a,[k.idPrefix],c)}),A=new Promise(function(a,b){if(C.resumeBootstrap){var c=C.resumeBootstrap;C.resumeBootstrap=function(){C.resumeBootstrap=c,C.resumeBootstrap.apply(this,arguments),a()}}else a()}),Promise.all([this.compileNg2Components(w,y),A,B]).then(function(){v.run(function(){if(e){for(e.$apply=d;x.length;)f.$apply(x.shift());n._bootstrapDone(t,q),e=null}})},l.onError),n},a.prototype.addProvider=function(a){this.providers.push(a)},a.prototype.upgradeNg1Provider=function(a,b){var c=b&&b.asToken||a;this.providers.push(g.provide(c,{useFactory:function(b){return b.get(a)},deps:[m.NG1_INJECTOR]}))},a.prototype.downgradeNg2Provider=function(a){var b=function(b){return b.get(a)};return b.$inject=[m.NG2_INJECTOR],b},a.prototype.compileNg2Components=function(a,b){for(var c=this,d=[],e=this.upgradedComponents,f=0;f<e.length;f++)d.push(a.resolveComponent(e[f]));return Promise.all(d).then(function(a){for(var d=c.upgradedComponents,e=0;e<a.length;e++)b[k.getComponentInfo(d[e]).selector]=a[e];return b},l.onError)},a}();b.UpgradeAdapter=r;var s=function(){function a(){this._readyFn=null,this.ng1RootScope=null,this.ng1Injector=null,this.ng2ApplicationRef=null,this.ng2Injector=null}return a.prototype._bootstrapDone=function(a,b){this.ng2ApplicationRef=a,this.ng2Injector=a.injector,this.ng1Injector=b,this.ng1RootScope=b.get(m.NG1_ROOT_SCOPE),this._readyFn&&this._readyFn(this)},a.prototype.ready=function(a){this._readyFn=a},a.prototype.dispose=function(){this.ng1Injector.get(m.NG1_ROOT_SCOPE).$destroy(),this.ng2ApplicationRef.dispose()},a}();return b.UpgradeAdapterRef=s,e.define=f,c.exports}),System.register("angular2/upgrade",["angular2/src/upgrade/upgrade_adapter"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=a("angular2/src/upgrade/upgrade_adapter");return b.UpgradeAdapter=f.UpgradeAdapter,b.UpgradeAdapterRef=f.UpgradeAdapterRef,d.define=e,c.exports});
//# sourceMappingURL=upgrade.js.map